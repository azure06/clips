<ion-item
  appFocusOn
  [tabindex]="index"
  [focus]="focus"
  (click)="onClick($event)"
  button="true"
  (mouseenter)="onMouseEnter($event)"
  (mouseleave)="onMouseLeave($event)"
>
  <ion-avatar class="container start" slot="start" [title]="index + 1">
    <div class="doc">
      <div class="badge">
        <span>{{ index + 1 > 99 ? '99+' : index + 1 }}</span>
      </div>
      <div class="globe">
        <ion-icon *ngIf="clip.type === 'text'" name="globe"></ion-icon>
        <ion-icon *ngIf="clip.type === 'image'" name="image"></ion-icon>
      </div>
      <ion-icon slot="icon-only" name="document"></ion-icon>
    </div>
  </ion-avatar>
  <ion-label>
    <div class="container">
      <div class="content start">
        <div *ngIf="clip.type === 'image'" class="image">
          <img [src]="clip.dataURI" />
        </div>
        <div *ngIf="clip.type === 'text'" class="text">
          <div
            *ngIf="view === 'htmlTextView'"
            style="position: relative; overflow:hidden;"
            [innerHTML]="clip.htmlText | sanitizeHtml"
            [title]="clip.htmlText"
          ></div>
          <h3 *ngIf="view === 'plainTextView'" [title]="currentText">
            {{ clip.translationText || clip.compactText }}
          </h3>
        </div>
        <p>{{ clip.dateFromNow }}</p>
      </div>
      <div class="content end" *ngIf="hasMouseEntered">
        <div>
          <ion-button *ngIf="false" fill="clear" shape="round" color="medium">
            <ion-icon name="share"></ion-icon>
          </ion-button>
          <ion-button
            fill="clear"
            shape="round"
            color="medium"
            [disabled]="clip.type === 'image'"
            (click)="onEdit($event)"
          >
            <ion-icon name="create"></ion-icon>
          </ion-button>
          <ion-button
            fill="clear"
            shape="round"
            [color]="view === 'htmlTextView' ? 'primary' : 'medium'"
            [disabled]="clip.type === 'image' || !clip.htmlText"
            (click)="
              switchView(
                view === 'htmlTextView' ? 'plainTextView' : 'htmlTextView'
              )
            "
          >
            <i class="material-icons text-format">text_format</i>
          </ion-button>
          <ion-button
            fill="clear"
            shape="round"
            color="medium"
            [disabled]="clip.type === 'image'"
            [color]="
              clip.translationText && view !== 'htmlTextView'
                ? 'primary'
                : 'medium'
            "
            (click)="onTranslate($event)"
          >
            <ion-spinner *ngIf="isTranslating" name="lines-small"></ion-spinner>
            <i *ngIf="!isTranslating" class="material-icons translate"
              >translate</i
            >
          </ion-button>
          <ion-button
            fill="clear"
            shape="round"
            [color]="clip.category === 'starred' ? 'primary' : 'medium'"
            (click)="onAddToBookmarkClick($event)"
          >
            <ion-icon name="star"></ion-icon>
          </ion-button>
          <ion-button
            class="remove"
            fill="clear"
            shape="round"
            color="medium"
            (click)="onRemoveClick($event)"
          >
            <ion-icon name="trash"></ion-icon>
          </ion-button>
        </div>
      </div>
    </div>
  </ion-label>
</ion-item>
